!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@clappr/core")):"function"==typeof define&&define.amd?define(["exports","@clappr/core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MediaControl={},e.Clappr)}(this,(function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return u(this,n)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}var v=function(e){l(r,e);var i=d(r);function r(e){var t;return n(this,r),(t=i.call(this,e))._stopPropagation=function(e){e.stopPropagation()},t.$el[0].addEventListener("click",t._stopPropagation),t.$el[0].classList.add("media-control__elements"),t}return o(r,[{key:"supportedVersion",get:function(){return{min:t.version}}},{key:"layer",get:function(){return null}},{key:"section",get:function(){return null}},{key:"position",get:function(){return null}},{key:"separator",get:function(){return!1}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("media_control"))}},{key:"destroy",value:function(){this._mediaControl=null,this.$el[0].removeEventListener("click",this._stopPropagation),p(c(r.prototype),"destroy",this).call(this)}},{key:"render",value:function(){return this.mediaControl&&!this.$el[0].parentNode&&this.mediaControl.renderMediaControlComponent(this),this}}]),r}(t.UICorePlugin);function g(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var f=".media-control {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 1;\n  pointer-events: none;\n  opacity: 1;\n  will-change: opacity;\n  transition: visibility .3s ease, opacity .3s ease; }\n  .media-control--hide {\n    opacity: 0;\n    visibility: hidden; }\n  .media-control__layers {\n    position: inherit;\n    height: inherit;\n    width: inherit; }\n  .media-control__elements {\n    display: flex;\n    pointer-events: auto;\n    cursor: pointer; }\n  .media-control__button {\n    height: 40px;\n    width: 40px;\n    outline: none; }\n    .media-control__button img {\n      height: 40px;\n      width: 40px; }\n\n.media-control .media-control__layers {\n  display: flex; }\n\n.media-control .media-control__sections {\n  display: flex; }\n  .media-control .media-control__sections--push-column {\n    margin-top: auto; }\n  .media-control .media-control__sections--push-row {\n    margin-left: auto; }\n\n.media-control .media-control__elements--push-column {\n  margin-top: auto; }\n\n.media-control .media-control__elements--push-row {\n  margin-left: auto; }\n";g(f);var y=function(e){l(r,e);var i=d(r);function r(e){var t;return n(this,r),(t=i.call(this,e)).disableBeforeVideoStarts&&t.$el[0].classList.add("media-control--hideRR"),t}return o(r,[{key:"name",get:function(){return"media_control"}},{key:"supportedVersion",get:function(){return{min:t.version}}},{key:"attributes",get:function(){return{class:"media-control"}}},{key:"defaultTemplate",get:function(){return t.template('<div class="media-control__layers media-control__layer-1" style="flex-direction: column;">\n  <div class="media-control__sections media-control__sections--push-column media-control__section-1"></div>\n  <div class="media-control__sections media-control__section-2"></div>\n</div>\n')}},{key:"config",get:function(){return this.options.mediaControl}},{key:"layersQuantity",get:function(){return this.config&&this.config.layersQuantity}},{key:"layersSettings",get:function(){return this.config&&this.config.layersConfig}},{key:"disableBeforeVideoStarts",get:function(){return this.config&&this.config.disableBeforeVideoStarts}},{key:"events",get:function(){return t.Browser.isMobile?{"touchstart .media-control__elements":"onTouchStart","touchend .media-control__elements":"removeKeepVisible"}:{"mouseenter .media-control__elements":"setKeepVisible","mouseleave .media-control__elements":"removeKeepVisible"}}},{key:"cll",get:function(){if(this._cll)return this._cll;var e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare;return this._cll=e,this._cll}},{key:"bindEvents",value:function(){var e=this,n=[{object:this.core,event:t.Events.CORE_ACTIVE_CONTAINER_CHANGED,callback:this.onContainerChanged},{object:this.core,event:t.Events.CORE_MOUSE_MOVE,callback:this.show},{object:this.core,event:t.Events.CORE_MOUSE_LEAVE,callback:this.hide}];n.forEach((function(t){return e.stopListening(t.object,t.event,t.callback)})),n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)}))}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.bindContainerEvents(),this.bindPlaybackEvents()}},{key:"bindContainerEvents",value:function(){var e=this,n=[{object:this.container,event:t.Events.CONTAINER_STOP,callback:this.resetVideoStartedStatus},{object:this.container,event:t.Events.CONTAINER_ENDED,callback:this.resetVideoStartedStatus}];this.container&&n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)}))}},{key:"bindPlaybackEvents",value:function(){var e=this,n=[{object:this.playback,event:t.Events.PLAYBACK_PLAY_INTENT,callback:this.setVideoStartedStatus}];this.playback&&n.forEach((function(t){return e.listenToOnce(t.object,t.event,t.callback)}))}},{key:"onTouchStart",value:function(){clearTimeout(this._hideId),this.setKeepVisible()}},{key:"setKeepVisible",value:function(){this._isVisible&&(this._keepVisible=!0)}},{key:"removeKeepVisible",value:function(){this._isVisible&&(this._keepVisible=!1,this.delayedHide())}},{key:"show",value:function(){this.checkMouseActivity(),this.isVideoStarted&&!this._isVisible&&(this._isVisible=!0,this.$el[0].classList.remove("media-control--hide"),this.core.trigger(t.Events.MEDIACONTROL_SHOW))}},{key:"checkMouseActivity",value:function(){var e=this;clearTimeout(this._hideId),clearTimeout(this._mouseStopId),this._mouseStopId=setTimeout((function(){return e.delayedHide()}),300)}},{key:"delayedHide",value:function(){var e=this,n=t.Browser.isMobile?3e3:2e3;this._hideId=setTimeout((function(){return e.hide()}),n)}},{key:"hide",value:function(){this.isVideoStarted&&this._isVisible&&!this._keepVisible&&(this.$el[0].classList.add("media-control--hide"),this.core.trigger(t.Events.MEDIACONTROL_HIDE),this._isVisible=!1)}},{key:"setVideoStartedStatus",value:function(){this.isVideoStarted=!0,this.disableBeforeVideoStarts||(this._isVisible=!0,this.hide())}},{key:"resetVideoStartedStatus",value:function(){this.disableBeforeVideoStarts?this.hide():this.show(),this.isVideoStarted=!1,this.bindPlaybackEvents()}},{key:"render",value:function(){if(!this.isRendered)return this.buildTemplate(),this.cacheElements(),this.$el.append(t.Styler.getStyleFor(f)),this.core.$el[0].append(this.$el[0]),this.initMediaControlComponents(),this.isRendered=!0,this}},{key:"buildTemplate",value:function(){!this.layersQuantity||this.layersQuantity<=0?this.$el.html(this.defaultTemplate({options:this.options})):this.buildLayers()}},{key:"buildLayers",value:function(){for(var e=this,t=function(t){var n=document.createElement("div"),i=e.layersSettings&&e.layersSettings.find((function(e){return e.id===t})),o=i&&void 0!==i.flexDirection?i.flexDirection:"column";n.style.flexDirection=o,n.classList.add("media-control__layers","media-control__layer-".concat(t)),i&&i.sectionsQuantity&&i.sectionsQuantity>0&&e.buildSections(n,i,o),e.$el[0].appendChild(n)},n=1;n<=this.layersQuantity;n++)t(n)}},{key:"buildSections",value:function(e,t,n){for(var i=function(i){var o=document.createElement("div"),r=t.sectionsConfig&&t.sectionsConfig.find((function(e){return e.id===i}));o.classList.add("media-control__sections","media-control__section-".concat(i)),o.style.flexDirection="".concat("row"===n?"column":"row"),r&&(r.separator&&o.classList.add("media-control__sections--push-".concat(n)),r.height&&(o.style.height=r.height),r.width&&(o.style.width=r.width),r.alignItems&&(o.style.alignItems=r.alignItems),r.justifyContent&&(o.style.justifyContent=r.justifyContent),r.flexGrow&&(o.style.flexGrow=r.flexGrow)),e.appendChild(o)},o=1;o<=t.sectionsQuantity;o++)i(o)}},{key:"cacheElements",value:function(){this.$layers=this.$el[0].querySelectorAll(".media-control__layers")}},{key:"initMediaControlComponents",value:function(){var e=this;this.core.plugins.filter((function(e){return e instanceof v})).forEach((function(t){return e.renderMediaControlComponent(t)}))}},{key:"renderMediaControlComponent",value:function(e){var t=e.layer,n=e.section,i=e.position,o=e.el,r=this.$el[0].querySelector(".media-control__layer-".concat(t)),s=".media-control__layer-".concat(t," .media-control__section-").concat(n),a=this.$el[0].querySelector(s);if(i&&(o.setAttribute("id",i),o.classList.add("media-control__element-".concat(i))),a){var l=r.style.flexDirection,c=a.querySelectorAll(".media-control__elements");e.separator&&e.$el[0].classList.add("media-control__elements--push-".concat("column"===l?"row":"column")),c.length>0&&i?this.appendMediaControlComponent(c,o,a):a.append(o),e.render()}}},{key:"appendMediaControlComponent",value:function(e,t,n){for(var i=0,o=e.length;i<o;){var r=i+o>>1;this.cll(parseInt(e[r].id,10),parseInt(t.id,10))>0?o=r:i=r+1}if(0===i)return n.insertAdjacentElement("afterbegin",t);n.querySelectorAll(".media-control__elements")[i-1].insertAdjacentElement("afterend",t)}},{key:"destroy",value:function(){this.isRendered=!1,p(c(r.prototype),"destroy",this).call(this)}}]),r}(t.UICorePlugin),b=new Image;b.src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='play-pause-button__icon' height='48px' viewBox='0 0 24 24' width='48px' fill='rgb(209, 255, 58)'%3e%3cpath d='M0 0h24v24H0V0z' fill='none'/%3e%3cpath d='M8 5v14l11-7L8 5z'/%3e%3c/svg%3e";var m=new Image;m.src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='play-pause-button__icon' height='48px' viewBox='0 0 24 24' width='48px' fill='rgb(209, 255, 58)'%3e%3cpath d='M0 0h24v24H0V0z' fill='none'/%3e%3cpath d='M6 19h4V5H6v14zm8-14v14h4V5h-4z'/%3e%3c/svg%3e";var k=new Image;k.src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='play-pause-button__icon' height='48px' viewBox='0 0 24 24' width='48px' fill='rgb(209, 255, 58)'%3e%3cpath d='M0 0h24v24H0V0z' fill='none'/%3e%3cpath d='M6 6h12v12H6V6z'/%3e%3c/svg%3e";var _=".play-pause-button {\n  background-color: transparent;\n  border: transparent;\n  padding: 0;\n  -webkit-filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7));\n  filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7)); }\n";g(_);var E=function(e){l(r,e);var i=d(r);function r(){return n(this,r),i.apply(this,arguments)}return o(r,[{key:"name",get:function(){return"play_pause_button"}},{key:"config",get:function(){return this.options.mediaControl&&this.options.mediaControl.playPauseComponent}},{key:"layer",get:function(){return this.config&&this.config.layer||1}},{key:"section",get:function(){return this.config&&this.config.section||1}},{key:"position",get:function(){return this.config&&this.config.position||1}},{key:"separator",get:function(){return this.config&&void 0!==this.config.separator?this.config.separator:null}},{key:"tagName",get:function(){return"button"}},{key:"attributes",get:function(){return{class:"play-pause-button media-control__button"}}},{key:"events",get:function(){return{click:this.toggle}}},{key:"isLiveMedia",get:function(){return this.playback.getPlaybackType()===t.Playback.LIVE}},{key:"shouldStopMedia",get:function(){return this.isLiveMedia&&!this.container.isDvrEnabled()}},{key:"bindEvents",value:function(){var e=this,n=[{object:this.core,event:t.Events.CORE_ACTIVE_CONTAINER_CHANGED,callback:this.onContainerChanged}];n.forEach((function(t){return e.stopListening(t.object,t.event,t.callback)})),n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)}))}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e=this,n=[{object:this.container,event:t.Events.CONTAINER_PLAY,callback:this.changeIcon},{object:this.container,event:t.Events.CONTAINER_PAUSE,callback:this.changeIcon},{object:this.container,event:t.Events.CONTAINER_STOP,callback:this.changeIcon},{object:this.container,event:t.Events.CONTAINER_ENDED,callback:this.changeIcon},{object:this.container,event:t.Events.CONTAINER_DESTROYED,callback:this.onContainerDestroyed}];this.container&&n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)}))}},{key:"changeIcon",value:function(){this.$el[0].innerHTML="",this.container&&this.container.isPlaying()?(this.shouldStopMedia?this.$el.append(k):this.$el.append(m),this.core.trigger(t.Events.MEDIACONTROL_PLAYING)):(this.$el.append(b),this.core.trigger(t.Events.MEDIACONTROL_NOTPLAYING))}},{key:"onContainerDestroyed",value:function(){this.$el[0].innerHTML="",this.$el.append(b)}},{key:"toggle",value:function(){this.container.isPlaying()?this.shouldStopMedia?this.container.stop():this.container.pause():this.container.play()}},{key:"render",value:function(){this.isRendered||(this.$el[0].innerHTML="",this.$el.append(t.Styler.getStyleFor(_)),this.changeIcon(),this.isRendered=!0,p(c(r.prototype),"render",this).call(this))}}]),r}(v),w=new Image;w.src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' height='48px' viewBox='0 0 24 24' width='48px' fill='rgb(209, 255, 58)'%3e%3cpath d='M0 0h24v24H0V0z' fill='none'/%3e%3cpath d='M3 9v6h4l5 5V4L7 9H3zm7-.17v6.34L7.83 13H5v-2h2.83L10 8.83zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z'/%3e%3c/svg%3e";var C=new Image;C.src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' height='48px' viewBox='0 0 24 24' width='48px' fill='rgb(209, 255, 58)'%3e%3cpath d='M0 0h24v24H0V0z' fill='none'/%3e%3cpath d='M4.34 2.93L2.93 4.34 7.29 8.7 7 9H3v6h4l5 5v-6.59l4.18 4.18c-.65.49-1.38.88-2.18 1.11v2.06c1.34-.3 2.57-.92 3.61-1.75l2.05 2.05 1.41-1.41L4.34 2.93zM10 15.17L7.83 13H5v-2h2.83l.88-.88L10 11.41v3.76zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zm-7-8l-1.88 1.88L12 7.76zm4.5 8c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z'/%3e%3c/svg%3e";var x='.volume {\n  display: flex;\n  position: relative; }\n  .volume__slider-container {\n    background-color: rgba(0, 0, 0, 0.8);\n    height: 120px;\n    opacity: 1;\n    position: absolute;\n    transition: visibility .3s ease, opacity .3s ease;\n    top: -120px;\n    width: 100%;\n    will-change: opacity; }\n    .volume__slider-container--hide {\n      opacity: 0;\n      visibility: hidden; }\n  .volume__slider {\n    --volume-before-width: 0%;\n    position: absolute;\n    top: 60px;\n    transform: translate(-50%, -50%) rotate(-90deg); }\n    .volume__slider[type=range] {\n      background-color: transparent;\n      box-sizing: content-box;\n      height: 30px;\n      outline: none;\n      width: 100px;\n      -webkit-appearance: none; }\n      .volume__slider[type=range]::before {\n        background-color: white;\n        content: "";\n        cursor: pointer;\n        height: 3px;\n        left: 0;\n        top: 14px;\n        position: absolute;\n        width: var(--volume-before-width); }\n      .volume__slider[type=range]::-webkit-slider-runnable-track {\n        width: 100%;\n        height: 3px;\n        cursor: pointer;\n        background: rgba(120, 120, 120, 0.8); }\n      .volume__slider[type=range]::-webkit-slider-thumb {\n        background-color: white;\n        border: 0 solid white;\n        border-radius: 50%;\n        box-sizing: content-box;\n        cursor: pointer;\n        margin: -5px 0 0 0;\n        height: 12px;\n        position: relative;\n        width: 12px;\n        -webkit-appearance: none; }\n      .volume__slider[type=range]:active::-webkit-slider-thumb {\n        transform: scale(1.2); }\n      .volume__slider[type=range]::-moz-range-track {\n        background: rgba(120, 120, 120, 0.8);\n        box-sizing: content-box;\n        cursor: pointer;\n        height: 3px;\n        width: 100%; }\n      .volume__slider[type=range]::-moz-range-progress {\n        background-color: white;\n        box-sizing: content-box;\n        height: 3px; }\n      .volume__slider[type=range]::-moz-focus-outer {\n        border: 0; }\n      .volume__slider[type=range]::-moz-range-thumb {\n        background-color: white;\n        border: 0 solid white;\n        border-radius: 50%;\n        box-sizing: content-box;\n        cursor: pointer;\n        height: 12px;\n        width: 12px; }\n      .volume__slider[type=range]:active::-moz-range-thumb {\n        transform: scale(1.2); }\n  .volume__icon-container {\n    align-items: center;\n    display: flex;\n    filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7));\n    height: 100%;\n    justify-content: center;\n    width: 100%;\n    -webkit-filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7)); }\n\n.media-control__elements .volume__icon-container img {\n  height: 36px;\n  width: 36px; }\n';g(x);var L=function(e){l(r,e);var i=d(r);function r(e){var t;return n(this,r),(t=i.call(this,e)).persistConfig=t.options.persistConfig,t}return o(r,[{key:"name",get:function(){return"volume"}},{key:"config",get:function(){return this.options.mediaControl&&this.options.mediaControl.volumeComponent}},{key:"layer",get:function(){return this.config&&this.config.layer||1}},{key:"section",get:function(){return this.config&&this.config.section||1}},{key:"position",get:function(){return this.config&&this.config.position||2}},{key:"separator",get:function(){return!this.config||void 0===this.config.separator||this.config.separator}},{key:"attributes",get:function(){return{class:"volume media-control__button"}}},{key:"template",get:function(){return t.template('<div class="volume__slider-container volume__slider-container--hide">\n  <input class="volume__slider" type="range" value="0" max="100">\n</div>\n<div class="volume__icon-container"></div>')}},{key:"currentValue",get:function(){return this._currentValue},set:function(e){this._currentValue=e}},{key:"events",get:function(){var e={"click .volume__icon-container":this.toggle},n={mouseenter:this.showSlider,mouseleave:this.hideSlider,"input .volume__slider":this.setValueFromInputSlider,"click .volume__slider":this.clearHideTimeout};return t.Browser.isMobile?e:a(a({},n),e)}},{key:"bindEvents",value:function(){var e=this,n=[{object:this.core,event:t.Events.CORE_ACTIVE_CONTAINER_CHANGED,callback:this.onContainerChanged}];n.forEach((function(t){return e.stopListening(t.object,t.event,t.callback)})),n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)}))}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.setInitialValue()}},{key:"setInitialValue",value:function(){var e=this.getInitialValue();this.updateSliderPercentage(e),this.setValue(e)}},{key:"getInitialValue",value:function(){var e=this.persistConfig&&!isNaN(t.Utils.Config.restore("volume"))?t.Utils.Config.restore("volume"):100;return this.core.options.mute&&(e=0),e}},{key:"updateSliderPercentage",value:function(e){this.$slider.style.setProperty("--volume-before-width","".concat(e,"%"))}},{key:"setValue",value:function(e){this._lastValue=this.currentValue||e,this.updateIcon(e),this.currentValue=e,this.persistConfig&&t.Utils.Config.persist("volume",e),this.$slider.value=e,this.container.setVolume(e)}},{key:"updateIcon",value:function(e){e===this.currentValue||e>0&&this.currentValue>0||(this.$iconContainer.innerHTML="",e>0?this.$iconContainer.append(w):this.$iconContainer.append(C))}},{key:"showSlider",value:function(){this.$sliderContainer.classList.remove("volume__slider-container--hide")}},{key:"hideSlider",value:function(){var e=this;clearTimeout(this._hideTimeoutId),this._hideTimeoutId=setTimeout((function(){e._isDragging?setTimeout((function(){return e.hideSlider}),100):e.$sliderContainer.classList.add("volume__slider-container--hide")}),100)}},{key:"setValueFromInputSlider",value:function(e){this._isDragging=!0,this.updateSliderPercentage(e.target.value),this.setValue(e.target.value)}},{key:"clearHideTimeout",value:function(){this._isDragging=!1}},{key:"toggle",value:function(){this.currentValue>0?this.setValueFromClickIcon(0):0===this._lastValue?this.setValueFromClickIcon(100):this.setValueFromClickIcon(this._lastValue)}},{key:"setValueFromClickIcon",value:function(e){this.updateSliderPercentage(e),this.setValue(e)}},{key:"render",value:function(){this.isRendered||(this.el.innerHTML="",this.$el.html(this.template({options:this.options})),this.cacheElements(),this.$el.append(t.Styler.getStyleFor(x)),this.isRendered=!0,p(c(r.prototype),"render",this).call(this))}},{key:"cacheElements",value:function(){this.$sliderContainer=this.$el[0].querySelector(".volume__slider-container"),this.$slider=this.$el[0].querySelector(".volume__slider"),this.$iconContainer=this.$el[0].querySelector(".volume__icon-container")}}]),r}(v),T=new Image;T.src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='fullscreen-button__enter-icon' height='48px' viewBox='0 0 24 24' width='48px' fill='rgb(209, 255, 58)'%3e%3cpath d='M0 0h24v24H0V0z' fill='none'/%3e%3cpath d='M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z'/%3e%3c/svg%3e";var P=new Image;P.src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='fullscreen-button__exit-icon' height='48px' viewBox='0 0 24 24' width='48px' fill='rgb(209, 255, 58)'%3e%3cpath d='M0 0h24v24H0V0z' fill='none'/%3e%3cpath d='M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z'/%3e%3c/svg%3e";var S=".fullscreen-button {\n  background-color: transparent;\n  border: transparent;\n  padding: 0;\n  -webkit-filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7));\n  filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7)); }\n";g(S);var I=function(e){l(r,e);var i=d(r);function r(){return n(this,r),i.apply(this,arguments)}return o(r,[{key:"name",get:function(){return"fullscreen_button"}},{key:"config",get:function(){return this.options.mediaControl&&this.options.mediaControl.fullscreenComponent}},{key:"layer",get:function(){return this.config&&this.config.layer||1}},{key:"section",get:function(){return this.config&&this.config.section||1}},{key:"position",get:function(){return this.config&&this.config.position||3}},{key:"separator",get:function(){return this.config&&void 0!==this.config.separator?this.config.separator:null}},{key:"tagName",get:function(){return"button"}},{key:"attributes",get:function(){return{class:"fullscreen-button media-control__button"}}},{key:"events",get:function(){return{click:this.toggle}}},{key:"bindCustomEvents",value:function(){this.boundedCheckFullscreenTarget=this.checkFullscreenTarget.bind(this),document.addEventListener("fullscreenchange",this.boundedCheckFullscreenTarget)}},{key:"checkFullscreenTarget",value:function(e){e.target===this.core.$el[0]&&this.changeIcon()}},{key:"bindEvents",value:function(){var e=this,n=[{object:this.core,event:t.Events.CORE_ACTIVE_CONTAINER_CHANGED,callback:this.onContainerChanged}];n.forEach((function(t){return e.stopListening(t.object,t.event,t.callback)})),n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)})),this.bindCustomEvents()}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e=this,n=[{object:this.container,event:t.Events.CONTAINER_DBLCLICK,callback:this.toggle}];this.container&&n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)}))}},{key:"toggle",value:function(){this.container.fullscreen(),this.core.toggleFullscreen()}},{key:"changeIcon",value:function(){var e=this;setTimeout((function(){e.$el[0].innerHTML="",t.Utils.Fullscreen.fullscreenElement()?e.$el.append(P):e.$el.append(T)}),600)}},{key:"render",value:function(){!this.isRendered&&t.Utils.Fullscreen.fullscreenEnabled()&&(this.$el[0].innerHTML="",this.$el.append(t.Styler.getStyleFor(S)),this.changeIcon(),this.isRendered=!0,p(c(r.prototype),"render",this).call(this))}},{key:"destroy",value:function(){document.removeEventListener("fullscreenchange",this.boundedCheckFullscreenTarget),p(c(r.prototype),"destroy",this).call(this)}}]),r}(v),O='.seek-bar {\n  --seek-before-width: 0%;\n  --buffered-width: 0%;\n  flex-grow: 1; }\n  .seek-bar[type=range] {\n    background-color: transparent;\n    filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.8));\n    height: 38px;\n    margin: 0 10px;\n    outline: none;\n    position: relative;\n    width: 100%;\n    -webkit-appearance: none;\n    -webkit-filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.8)); }\n    .seek-bar[type=range]::before {\n      background-color: white;\n      content: "";\n      cursor: pointer;\n      height: 3px;\n      left: 0;\n      top: 18px;\n      position: absolute;\n      width: var(--seek-before-width); }\n    .seek-bar[type=range]::-webkit-slider-runnable-track {\n      width: 100%;\n      height: 3px;\n      cursor: pointer;\n      background: linear-gradient(to right, rgba(120, 120, 120, 0.8) var(--buffered-width), rgba(255, 255, 255, 0.5) var(--buffered-width)); }\n    .seek-bar[type=range]::-webkit-slider-thumb {\n      background-color: white;\n      border: 0 solid white;\n      border-radius: 50%;\n      box-sizing: content-box;\n      cursor: pointer;\n      margin: -5px 0 0 0;\n      height: 12px;\n      position: relative;\n      width: 12px;\n      -webkit-appearance: none; }\n    .seek-bar[type=range]:active::-webkit-slider-thumb {\n      transform: scale(1.2); }\n    .seek-bar[type=range]::-moz-range-track {\n      background: linear-gradient(to right, rgba(120, 120, 120, 0.8) var(--buffered-width), rgba(255, 255, 255, 0.5) var(--buffered-width));\n      cursor: pointer;\n      height: 3px;\n      width: 100%; }\n    .seek-bar[type=range]::-moz-range-progress {\n      background-color: white;\n      height: 3px; }\n    .seek-bar[type=range]::-moz-focus-outer {\n      border: 0; }\n    .seek-bar[type=range]::-moz-range-thumb {\n      background-color: white;\n      border: 0 solid white;\n      border-radius: 50%;\n      box-sizing: content-box;\n      cursor: pointer;\n      height: 12px;\n      width: 12px; }\n    .seek-bar[type=range]:active::-moz-range-thumb {\n      transform: scale(1.2); }\n    .seek-bar[type=range]::-ms-track {\n      background: transparent;\n      border: solid transparent;\n      color: transparent;\n      cursor: pointer;\n      height: 3px;\n      width: 100%; }\n    .seek-bar[type=range]::-ms-fill-lower {\n      background-color: white; }\n    .seek-bar[type=range]::-ms-fill-upper {\n      background: linear-gradient(to right, rgba(120, 120, 120, 0.8) var(--buffered-width), rgba(255, 255, 255, 0.5) var(--buffered-width)); }\n    .seek-bar[type=range]::-ms-thumb {\n      background-color: white;\n      border: 0 solid white;\n      border-radius: 50%;\n      box-sizing: content-box;\n      cursor: pointer;\n      height: 12px;\n      width: 12px; }\n    .seek-bar[type=range]:active::-ms-thumb {\n      transform: scale(1.2); }\n\n.media-control__elements.seek-bar--disable-interaction {\n  pointer-events: none; }\n';g(O);var V=function(e){l(r,e);var i=d(r);function r(e){var o;return n(this,r),t.Events.register("MEDIA_CONTROL_SEEK_BAR_START_DRAGGING"),t.Events.register("MEDIA_CONTROL_SEEK_BAR_STOP_DRAGGING"),(o=i.call(this,e))._isDragging=!1,o}return o(r,[{key:"name",get:function(){return"seek_bar"}},{key:"config",get:function(){return this.options.mediaControl&&this.options.mediaControl.seekBarComponent}},{key:"layer",get:function(){return this.config&&this.config.layer||1}},{key:"section",get:function(){return this.config&&this.config.section||2}},{key:"position",get:function(){return this.config&&this.config.position||1}},{key:"separator",get:function(){return this.config&&void 0!==this.config.separator?this.config.separator:null}},{key:"tagName",get:function(){return"input"}},{key:"attributes",get:function(){return{class:"seek-bar seek-bar--disable-interaction",type:"range",value:0,max:100}}},{key:"events",get:function(){var e={touchend:this.seek,touchmove:this.updateProgressBarViaInteraction},n={click:this.seek,input:this.updateProgressBarViaInteraction};return t.Browser.isMobile?e:n}},{key:"isLiveMedia",get:function(){return this.playback.getPlaybackType()===t.Playback.LIVE}},{key:"shouldDisableInteraction",get:function(){return this.isLiveMedia&&!this.container.isDvrEnabled()}},{key:"bindEvents",value:function(){var e=this,n=[{object:this.core,event:t.Events.CORE_ACTIVE_CONTAINER_CHANGED,callback:this.onContainerChanged}];n.forEach((function(t){return e.stopListening(t.object,t.event,t.callback)})),n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)}))}},{key:"onContainerChanged",value:function(){this.setDefaultProperties(),this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&(this.bindContainerEvents(),this.bindPlaybackEvents())}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,t.Events.CONTAINER_PROGRESS,this.onContainerProgress)}},{key:"onTimeUpdate",value:function(e){if(!this._isDragging){var t=Math.floor(e.current),n=Math.floor(e.total);t!==parseInt(this.$el[0].value,10)&&this.updatePosition(t,n),n!==parseInt(this.$el[0].max,10)&&this.updateDuration(n)}}},{key:"updatePosition",value:function(e,t){this._isDragging||(this.$el[0].value=e,this.$el[0].style.setProperty("--seek-before-width","".concat(e/t*100,"%")))}},{key:"updateDuration",value:function(e){this._isDragging||(this.$el[0].max=e)}},{key:"onContainerProgress",value:function(e){var t=Math.floor(e.current),n=Math.floor(e.total);this.updateBufferedBar(t,n)}},{key:"updateBufferedBar",value:function(e,t){this.$el[0].style.setProperty("--buffered-width","".concat(e/t*100,"%"))}},{key:"bindPlaybackEvents",value:function(){this.listenToOnce(this.playback,t.Events.PLAYBACK_PLAY,this.onFirstPlay)}},{key:"onFirstPlay",value:function(){if(!this.shouldDisableInteraction)return this.$el[0].classList.remove("seek-bar--disable-interaction"),this.listenTo(this.container,t.Events.CONTAINER_TIMEUPDATE,this.onTimeUpdate);this.$el[0].value=this.$el[0].max,this.$el[0].style.setProperty("--seek-before-width","".concat(this.$el[0].value,"%"))}},{key:"updateProgressBarViaInteraction",value:function(e){this.shouldDisableInteraction||(!this._isDragging&&(this._isDragging=!0),this.$el[0].style.setProperty("--seek-before-width","".concat(e.target.value/e.target.max*100,"%")),this.core.trigger(t.Events.Custom.MEDIA_CONTROL_SEEK_BAR_START_DRAGGING,{event:e}))}},{key:"seek",value:function(e){if(!this.shouldDisableInteraction){var n=e.target.value/e.target.max*100;this.$el[0].style.setProperty("--seek-before-width","".concat(n,"%")),this.container.seekPercentage(n),this._isDragging=!1,this.core.trigger(t.Events.Custom.MEDIA_CONTROL_SEEK_BAR_STOP_DRAGGING,{event:e})}}},{key:"render",value:function(){this.isRendered||(this.el.innerHTML="",this.$el.append(t.Styler.getStyleFor(O)),this.isRendered=!0,p(c(r.prototype),"render",this).call(this))}},{key:"setDefaultProperties",value:function(){this.$el[0].value=0,this.$el[0].max=100,this.$el[0].classList.add("seek-bar--disable-interaction")}}]),r}(v),A=".time-indicator {\n  align-items: center;\n  color: white;\n  filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7));\n  justify-content: center;\n  text-align: center;\n  -webkit-filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7)); }\n  .time-indicator__separator {\n    white-space: pre; }\n\n.media-control__elements.time-indicator {\n  font-size: 15px;\n  margin-right: 5px;\n  pointer-events: none; }\n  .media-control__elements.time-indicator--disabled {\n    display: none; }\n";g(A);var M="00:00",$=function(e){l(r,e);var i=d(r);function r(){return n(this,r),i.apply(this,arguments)}return o(r,[{key:"name",get:function(){return"time_indicator"}},{key:"config",get:function(){return this.options.mediaControl&&this.options.mediaControl.timeIndicatorComponent}},{key:"layer",get:function(){return this.config&&this.config.layer||1}},{key:"section",get:function(){return this.config&&this.config.section||2}},{key:"position",get:function(){return this.config&&this.config.position||2}},{key:"separator",get:function(){return this.config&&void 0!==this.config.separator?this.config.separator:null}},{key:"attributes",get:function(){return{class:"time-indicator"}}},{key:"template",get:function(){return t.template('<span class="time-indicator__position"><%= defaultValue %></span>\n<span class="time-indicator__separator"> / </span>\n<span class="time-indicator__duration"><%= defaultValue %></span>')}},{key:"isLiveMedia",get:function(){return this.playback.getPlaybackType()===t.Playback.LIVE}},{key:"shouldDisableInteraction",get:function(){return this.isLiveMedia&&!this.container.isDvrEnabled()}},{key:"bindEvents",value:function(){var e=this,n=[{object:this.core,event:t.Events.CORE_ACTIVE_CONTAINER_CHANGED,callback:this.onContainerChanged},{object:this.core,event:t.Events.Custom.MEDIA_CONTROL_SEEK_BAR_START_DRAGGING,callback:this.onStartDraggingSeekBar},{object:this.core,event:t.Events.Custom.MEDIA_CONTROL_SEEK_BAR_STOP_DRAGGING,callback:this.onStopDraggingSeekBar}];n.forEach((function(t){return e.stopListening(t.object,t.event,t.callback)})),n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)}))}},{key:"setInitialState",value:function(){this.setPosition(M),this.setDuration(M),this.$el[0].classList.remove("time-indicator--disabled")}},{key:"onContainerChanged",value:function(){this.setInitialState(),this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&this.bindPlaybackEvents()}},{key:"bindPlaybackEvents",value:function(){this.listenToOnce(this.playback,t.Events.PLAYBACK_PLAY,this.onFirstPlay)}},{key:"onFirstPlay",value:function(){this.shouldDisableInteraction?this.$el[0].classList.add("time-indicator--disabled"):this.listenTo(this.container,t.Events.CONTAINER_TIMEUPDATE,this.onTimeUpdate)}},{key:"onTimeUpdate",value:function(e){if(null!==e.current&&null!==e.total&&!this._isDragging){var n=t.Utils.formatTime(Math.floor(e.current)),i=t.Utils.formatTime(Math.floor(e.total));n!==this.$position.textContent&&this.setPosition(n),i!==this.$duration.textContent&&this.setDuration(i)}}},{key:"setPosition",value:function(e){this.$position.textContent=e}},{key:"setDuration",value:function(e){this.$duration.textContent=e}},{key:"onStartDraggingSeekBar",value:function(e){this._isDragging=!0;var n=t.Utils.formatTime(Math.floor(e.event.target.value));n!==this.$position.textContent&&this.setPosition(n)}},{key:"onStopDraggingSeekBar",value:function(){this._isDragging=!1}},{key:"render",value:function(){this.isRendered||(this.el.innerHTML="",this.$el.html(this.template({defaultValue:M})),this.cacheElements(),this.$el.append(t.Styler.getStyleFor(A)),this.isRendered=!0,p(c(r.prototype),"render",this).call(this))}},{key:"cacheElements",value:function(){this.$position=this.$el[0].querySelector(".time-indicator__position"),this.$separator=this.$el[0].querySelector(".time-indicator__separator"),this.$duration=this.$el[0].querySelector(".time-indicator__duration")}}]),r}(v),D=new Image;D.src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='level-selector__icon' height='48px' viewBox='0 0 24 24' width='48px' fill='rgb(209, 255, 58)'%3e%3cpath d='M0 0h24v24H0V0z' fill='none'/%3e%3cpath d='M10 20h4V4h-4v16zm-6 0h4v-8H4v8zM16 9v11h4V9h-4z'/%3e%3c/svg%3e";var R=".level-selector {\n  background-color: transparent;\n  border: transparent;\n  filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7));\n  padding: 0;\n  -webkit-filter: drop-shadow(2px 2px 1px rgba(0, 0, 0, 0.7)); }\n  .level-selector__container {\n    background-color: rgba(0, 0, 0, 0.8);\n    bottom: 40px;\n    color: white;\n    opacity: 1;\n    max-height: 200px;\n    min-width: 100px;\n    overflow-x: hidden;\n    overflow-y: auto;\n    position: absolute;\n    right: 0;\n    transition: visibility .3s ease, opacity .3s ease;\n    visibility: visible;\n    will-change: opacity; }\n    .level-selector__container--hidden {\n      opacity: 0;\n      visibility: hidden; }\n  .level-selector__list {\n    list-style-type: none;\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n    margin: 0; }\n    .level-selector__list-item {\n      color: rgba(255, 255, 255, 0.3);\n      padding: 10px; }\n      .level-selector__list-item--placeholder {\n        color: white;\n        pointer-events: none !important; }\n      .level-selector__list-item--current {\n        color: white; }\n";g(R);var N=function(e){l(r,e);var i=d(r);function r(){return n(this,r),i.apply(this,arguments)}return o(r,[{key:"name",get:function(){return"level_selector"}},{key:"config",get:function(){return this.options.mediaControl&&this.options.mediaControl.levelSelectorComponent}},{key:"layer",get:function(){return this.config&&this.config.layer||1}},{key:"section",get:function(){return this.config&&this.config.section||1}},{key:"position",get:function(){return this.config&&this.config.position||2}},{key:"separator",get:function(){return!this.config||void 0===this.config.separator||this.config.separator}},{key:"attributes",get:function(){return{class:"level-selector media-control__button"}}},{key:"template",get:function(){return t.template('<div class="level-selector__container level-selector__container--hidden">\n  <ul class="level-selector__list">\n    <% if (levels.length <= 0) { %>\n      <li class="level-selector__list-item--placeholder">Levels not available.</li>  \n    <% } else if (!hasMP4Levels) { %>\n    <li id="-1" class="level-selector__list-item">AUTO</li>\n    <% }; %>\n    <% for (var i = 0; i < levels.length; i++) { %>\n      <li id="<%= levels[i].id %>" class="level-selector__list-item"><%= levels[i].label %></li>\n    <% }; %>\n  </ul>\n</div>')}},{key:"hasMP4Levels",get:function(){return this.config&&this.config.mp4Levels&&this.config.mp4Levels.length>0}},{key:"events",get:function(){var e={click:this.showList},n={"click .level-selector__list-item":this.onLevelSelect},i={mouseenter:this.showList,mouseleave:this.hideList};return t.Browser.isMobile||this.config&&this.config.onlyShowWithClick?a(a({},n),e):a(a({},n),i)}},{key:"bindEvents",value:function(){var e=this,n=[{object:this.core,event:t.Events.CORE_ACTIVE_CONTAINER_CHANGED,callback:this.onContainerChanged}];n.forEach((function(t){return e.stopListening(t.object,t.event,t.callback)})),n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)})),this.bindCustomEvents()}},{key:"onContainerChanged",value:function(){this.playback&&this.stopListening(this.playback),this.playback=this.core.activePlayback,this.hasMP4Levels?this.fillLevels(this.config.mp4Levels):this.bindPlaybackEvents()}},{key:"bindPlaybackEvents",value:function(){var e=this,n=[{object:this.playback,event:t.Events.PLAYBACK_LEVELS_AVAILABLE,callback:this.fillLevels}];n.forEach((function(t){return e.stopListening(t.object,t.event,t.callback)})),n.forEach((function(t){return e.listenTo(t.object,t.event,t.callback)})),this.playback.levels&&this.playback.levels.length>0&&this.fillLevels(this.playback.levels)}},{key:"fillLevels",value:function(e){var t=this;this.levels=e,this.config&&this.config.onLevelsAvailable&&"function"==typeof this.config.onLevelsAvailable&&(this.levels=this.config.onLevelsAvailable(this.levels)),this.setCustomLabels(this.levels),this.render(),this._currentLevel=this.hasMP4Levels?this.updateMP4CurrentLevel():Object.values(this.$levelsList.children).find((function(e){return parseInt(e.id,10)===t.playback.currentLevel})),this._currentLevel&&this._currentLevel.classList&&this._currentLevel.classList.add("level-selector__list-item--current")}},{key:"setCustomLabels",value:function(e){var t=this;this.config&&this.config.labels&&e.map((function(e){return t.config.labels[e.id]&&(e.label=t.config.labels[e.id])}))}},{key:"updateMP4CurrentLevel",value:function(){var e=this.config.mp4Levels.find((function(e){return!0===e.default}));return Object.values(this.$levelsList.children).find((function(t){return parseInt(t.id,10)===e.id}))}},{key:"bindCustomEvents",value:function(){this.hideList=this.hideList.bind(this),document.removeEventListener("click",this.hideList),document.addEventListener("click",this.hideList)}},{key:"showList",value:function(){this.$menu.classList.remove("level-selector__container--hidden")}},{key:"hideList",value:function(){this.$menu.classList.add("level-selector__container--hidden")}},{key:"onLevelSelect",value:function(e){if(e.target.id===this._currentLevel.id)return setTimeout(this.hideList);this._currentLevel.classList.remove("level-selector__list-item--current"),this._currentLevel=e.target,this.playback.currentLevel=parseInt(e.target.id,10),this._currentLevel.classList.add("level-selector__list-item--current"),this.hasMP4Levels&&this.updateMP4Source(),e.stopPropagation(),setTimeout(this.hideList)}},{key:"updateMP4Source",value:function(){var e=this;this.listenToOnce(this.playback,t.Events.PLAYBACK_LOADEDMETADATA,(function(){e.playback._setupSrc(e.config.mp4Levels[e._currentLevel.id].source),e.playback.play()})),this.playback.$el[0].load(this.config.mp4Levels[this._currentLevel.id].source)}},{key:"render",value:function(){this.el.innerHTML="",this.$el.html(this.template({levels:this.levels||[],hasMP4Levels:this.hasMP4Levels})),this.cacheElements(),this.$el.append(t.Styler.getStyleFor(R)),this.$el.append(D),p(c(r.prototype),"render",this).call(this)}},{key:"cacheElements",value:function(){this.$menu=this.$el[0].querySelector(".level-selector__container"),this.$levelsList=this.$el[0].querySelector(".level-selector__list")}},{key:"destroy",value:function(){document.removeEventListener("click",this.hideList),p(c(r.prototype),"destroy",this).call(this)}}]),r}(v);e.BaseComponentPlugin=v,e.FullscreenButtonPlugin=I,e.LevelSelectorPlugin=N,e.MainPlugin=y,e.PlayPauseButtonPlugin=E,e.SeekBarPlugin=V,e.TimeIndicatorPlugin=$,e.VolumePlugin=L,Object.defineProperty(e,"__esModule",{value:!0})}));